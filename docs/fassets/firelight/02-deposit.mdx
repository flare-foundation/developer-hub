---
title: Deposit Assets into Firelight Vault
tags: [intermediate, fassets]
slug: deposit
description: Learn how to deposit assets into a Firelight vault
keywords: [fassets, flare-network, fxrp, firelight, vault]
sidebar_position: 2
---

import CodeBlock from "@theme/CodeBlock";
import FirelightDeposit from "!!raw-loader!/examples/developer-hub-javascript/firelight-deposit.ts";

## Overview

This guide demonstrates how to deposit assets into a Firelight vault.
The Firelight vault implements the [ERC-4626](https://eips.ethereum.org/EIPS/eip-4626) standard, which allows users to deposit assets (e.g., FXRP) and receive vault shares in return.

Depositing assets is the process of transferring assets to the vault and receiving vault shares, which represent your proportional ownership of the vault's assets.

## Prerequisites

- [Flare Hardhat Starter Kit](/network/guides/hardhat-foundry-starter-kit)
- [Flare Network Periphery Contracts](https://www.npmjs.com/package/@flarenetwork/flare-periphery-contracts)
- Understanding of [FAssets](/fassets/overview)
- Sufficient asset balance (e.g., FXRP) to deposit into the vault.

## Firelight Vault Deposit Script

The following script demonstrates how to deposit assets into the Firelight vault:

<CodeBlock language="typescript" title="scripts/firelight/deposit.ts">
  {FirelightDeposit}
</CodeBlock>

## Script Breakdown

### 1. Script Setup

The script starts by defining constants and importing the required contract interfaces:

- `FIRELIGHT_VAULT_ADDRESS`: The address of the Firelight vault contract on the [Flare Testnet Coston2 network](/network/overview).
- `DEPOSIT_AMOUNT`: The number of tokens to deposit (default: 1 token).
- `IFirelightVault`: The interface for interacting with the Firelight vault contract, taken from the Firelight GitHub [repository](https://github.com/firelight-protocol/firelight-core/blob/main/contracts/FirelightVault.sol).
- `IERC20`: Standard [ERC-20](https://eips.ethereum.org/EIPS/eip-20) interface for token interactions.

### 2. Calculate Deposit Amount

The script converts the desired deposit amount into the correct units:

```typescript
const amount = DEPOSIT_AMOUNT * 10 ** assetDecimals;
```

### 3. Check Maximum Deposit Capacity

Before depositing, the script checks if the requested amount exceeds the maximum allowed:

```typescript
const maxDeposit = await vault.maxDeposit(account);
```

The `maxDeposit` function returns the maximum amount of assets that the specified account can deposit.

If the requested amount exceeds the maximum, the script exits with an error to prevent a failed transaction.

### 4. Approve Token Transfer

Before depositing, the script must approve the vault to spend the deposit amount:

```typescript
const approveTx = await assetToken.approve(vault.address, amount, {
  from: account,
});
```

This approval is required because the vault needs to transfer assets from the user's account.
The approval amount should match or exceed the `amount` value to be deposited.

### 5. Deposit Assets

Finally, the script deposits the assets:

```typescript
const depositTx = await vault.deposit(amount, account, { from: account });
```

The `deposit` function:

- Takes the amount of assets to deposit (`amount`).
- Specifies the recipient address (`account`).
- Transfers the assets from the user to the vault.
- Mints the corresponding number of shares to the recipient based on the current exchange rate.

## Running the Script

To run the Firelight vault deposit script:

1. Ensure you have the [Flare Hardhat Starter Kit](/network/guides/hardhat-foundry-starter-kit) set up.
2. Update the `FIRELIGHT_VAULT_ADDRESS` constant with the correct vault address for your network.
3. Adjust the `DEPOSIT_AMOUNT` constant to the desired number of tokens.
4. Ensure your account has sufficient asset balance (e.g., FXRP) to cover the deposit.
5. Run the script using Hardhat:

```bash
npx hardhat run scripts/firelight/deposit.ts --network coston2
```

## Output

The script outputs the following information:

```bash
=== Deposit (ERC-4626) ===
Sender: 0x0d09ff7630588E05E2449aBD3dDD1D8d146bc5c2
Vault: 0x91Bfe6A68aB035DFebb6A770FFfB748C03C0E40B
Asset: 0x0b6A3645c240605887a5532109323A3E12273dc7 (FTestXRP, decimals=6)
Deposit amount: 1000000 (= 1 FTestXRP)
Max deposit: 115792089237316195423570985008687907853269984665640564039457584007913129639935
Approve tx: 0x87a36c1009575719fd3adb9a1bb2e3062a601bf910fc7fac3248da71891c39a4
Deposit tx: 0x446b7a171859d676677fc870cff81c7e8c0d618fc3588e60665792da86b94c50
```

## Difference Between Deposit and Mint

The Firelight vault provides two ways to add assets:

- **`deposit`**: You specify the amount of assets to deposit, and the vault calculates how many shares you'll receive based on the current exchange rate.
- **`mint`**: You specify the number of shares you want, and the vault calculates how many assets you need to deposit.

Both functions follow the [ERC-4626](https://eips.ethereum.org/EIPS/eip-4626) standard and result in the same outcome: you deposit assets and receive vault shares.

## Summary

In this guide, you learned how to deposit assets into a Firelight vault by specifying the amount of assets to deposit.

:::tip[What's next]

To continue your Firelight development journey, you can:

- Learn how to [get Firelight vault status](/fassets/firelight/status) to monitor your position.
- Learn how to [mint Firelight vault shares](/fassets/firelight/mint) by specifying the number of shares.
- Learn how to [withdraw assets from a Firelight vault](/fassets/firelight/withdraw).
- Learn how to [redeem assets from a Firelight vault](/fassets/firelight/redeem).
- Explore the [FAssets system overview](/fassets/overview) to understand the broader ecosystem.

:::
