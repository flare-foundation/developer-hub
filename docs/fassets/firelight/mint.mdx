---
title: Mint Firelight Vault Shares
tags: [intermediate, fassets]
slug: mint
description: Learn how to mint Firelight vault shares
keywords: [fassets, flare-network, fxrp, firelight, vault]
sidebar_position: 3
---

import CodeBlock from "@theme/CodeBlock";
import FirelightMint from "!!raw-loader!/examples/developer-hub-javascript/firelight-mint.ts";

## Overview

This guide demonstrates how to mint vault shares in a Firelight vault by depositing assets.
The Firelight vault implements the [ERC-4626](https://eips.ethereum.org/EIPS/eip-4626) standard, which allows users to deposit assets (e.g., FXRP) and receive vault shares in return.

Minting shares is the process of depositing assets into the vault and receiving vault shares, which represent your proportional ownership of the vault's assets.

## Prerequisites

- [Flare Hardhat Starter Kit](/network/guides/hardhat-foundry-starter-kit).
- [Flare Network Periphery Contracts](https://www.npmjs.com/package/@flarenetwork/flare-periphery-contracts).
- Understanding of [FAssets](/fassets/overview).
- Sufficient asset balance (e.g., FXRP) to deposit into the vault.

## Firelight Vault Mint Script

The following script demonstrates how to mint vault shares by depositing assets into the Firelight vault:

<CodeBlock language="typescript" title="scripts/firelight/mint.ts">
  {FirelightMint}
</CodeBlock>

## Script Breakdown

### 1. Script Setup

The script starts by defining constants and importing the required contract interfaces:

- `FIRELIGHT_VAULT_ADDRESS`: The address of the Firelight vault contract on the [Flare Testnet Coston2 network](/network/overview).
- `SHARES_TO_MINT`: The number of shares to mint (default: 1 share).
- `IFirelightVault`: The interface for interacting with the Firelight vault contract.
  Taken from the Firelight GitHub [repository](https://github.com/firelight-protocol/firelight-core/blob/main/contracts/FirelightVault.sol).
- `IERC20`: Standard [ERC-20](https://eips.ethereum.org/EIPS/eip-20) interface for token interactions.

### 2. Calculate Shares to Mint

The script converts the desired number of shares to mint into the correct units:

```typescript
const sharesToMint = SHARES_TO_MINT * 10 ** assetDecimalsNum;
```

### 3. Check Maximum Mint Capacity

Before minting, the script checks if the requested amount exceeds the maximum allowed:

```typescript
const maxMint = await vault.maxMint(account);
```

The `maxMint` function returns the maximum number of shares that the specified account can mint.

If the requested amount exceeds the maximum, the script exits with an error to prevent a failed transaction.

### 4. Calculate Required Assets

The script uses the `previewMint` function to calculate how many assets are needed to mint the desired number of shares:

```typescript
const assetsNeeded = await vault.previewMint(sharesToMint);
```

The `previewMint` function is part of the [ERC-4626](https://eips.ethereum.org/EIPS/eip-4626) standard and returns the amount of assets required to mint a specific number of shares, accounting for the current exchange rate between assets and shares.

### 5. Approve Token Transfer

Before minting, the script must approve the vault to spend the required amount of assets:

```typescript
const approveTx = await assetToken.approve(vault.address, assetsNeeded, {
  from: account,
});
```

This approval is required because the vault needs to transfer assets from the user's account.
The approval amount should match or exceed the `assetsNeeded` value calculated in the previous step.

### 6. Mint Vault Shares

Finally, the script mints the vault shares:

```typescript
const mintTx = await vault.mint(sharesToMint, account, { from: account });
```

The `mint` function:

- Takes the number of shares to mint (`sharesToMint`).
- Specifies the recipient address (`account`).
- Transfers the required assets from the user to the vault.
- Mints the corresponding number of shares to the recipient.

## Running the Script

To run the Firelight vault mint script:

1. Ensure you have the [Flare Hardhat Starter Kit](/network/guides/hardhat-foundry-starter-kit) set up.
2. Update the `FIRELIGHT_VAULT_ADDRESS` constant with the correct vault address for your network.
3. Adjust the `SHARES_TO_MINT` constant to the desired number of shares.
4. Ensure your account has sufficient asset balance (e.g., FXRP) to cover the minting cost.
5. Run the script using Hardhat:

```bash
npx hardhat run scripts/firelight/mint.ts --network coston2
```

## Output

The script outputs the following information:

```bash
=== Mint vault shares (ERC-4626) ===
Sender: 0x0d09ff7630588E05E2449aBD3dDD1D8d146bc5c2
Vault: 0x91Bfe6A68aB035DFebb6A770FFfB748C03C0E40B
Asset: 0x0b6A3645c240605887a5532109323A3E12273dc7 (FTestXRP, decimals=6)
Shares to mint: 1000000 (= 1 share)
Max mint: 115792089237316195423570985008687907853269984665640564039457584007913129639935
Assets needed (from previewMint): 1000000
Approve tx: 0xfe5683b82a4997df7d7b7c22c8c4dc416cdec8d1380dceeb996279c64c525460
Mint tx: 0x14d1c7ffe4f3b6a9fa04315eb8592ff9c64f2ae80c7e6e3a6e1b9cf9478106c3
```

## Difference Between Mint and Deposit

The Firelight vault provides two ways to add assets:

- **`mint`**: You specify the number of shares you want, and the vault calculates how many assets you need to deposit.
- **`deposit`**: You specify the amount of assets to deposit, and the vault calculates how many shares you'll receive based on the current exchange rate.

Both functions follow the [ERC-4626](https://eips.ethereum.org/EIPS/eip-4626) standard and result in the same outcome: you deposit assets and receive vault shares.

## Summary

In this guide, you learned how to mint vault shares in a Firelight vault by specifying the number of shares you want.

:::tip[What's next]

To continue your Firelight development journey, you can:

- Learn how to [get Firelight vault status](/fassets/firelight/status) to monitor your position.
- Learn how to [deposit assets into a Firelight vault](/fassets/firelight/deposit) by specifying the amount of assets to deposit.
- Learn how to [withdraw assets from a Firelight vault](/fassets/firelight/withdraw).
- Learn how to [redeem assets from a Firelight vault](/fassets/firelight/redeem).
- Explore the [FAssets system overview](/fassets/overview) to understand the broader ecosystem.

:::
